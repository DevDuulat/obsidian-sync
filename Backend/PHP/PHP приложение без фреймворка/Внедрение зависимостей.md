**Что такое инжектор зависимостей?**
Инжектор зависимостей решает проблемы с зависимостями вашего класса и гарантирует, что правильные объекты будут внедрены при создании экземпляра класса. Мы будем использовать пакет **Auryn** для этой цели.

### Установка Auryn

1. Установите пакет Auryn через Composer.
2. Создайте новый файл `Dependencies.php` в папке `src/` и добавьте следующий код:

```php
<?php declare(strict_types = 1);

$injector = new \Auryn\Injector;

$injector->alias('Http\Request', 'Http\HttpRequest');
$injector->share('Http\HttpRequest');
$injector->define('Http\HttpRequest', [
    ':get' => $_GET,
    ':post' => $_POST,
    ':cookies' => $_COOKIE,
    ':files' => $_FILES,
    ':server' => $_SERVER,
]);

$injector->alias('Http\Response', 'Http\HttpResponse');
$injector->share('Http\HttpResponse');

return $injector;
```

### Пояснение кода

- **alias**: Позволяет использовать интерфейс вместо имени класса, упрощая замену реализации.
- **share**: Гарантирует, что будет использован один и тот же экземпляр объекта, что позволяет избежать создания нескольких экземпляров.
- **define**: Позволяет передавать параметры в конструктор класса.

### Изменения в Bootstrap.php

Теперь измените ваш `Bootstrap.php` для использования инжектора:

1. Подключите `Dependencies.php`:

```php
$injector = include('Dependencies.php');
```

2. Замените создание объектов `request` и `response`:

```php
$request = $injector->make('Http\HttpRequest');
$response = $injector->make('Http\HttpResponse');
```

3. Обновите код диспетчера маршрутов:

```php
$class = $injector->make($className);
$class->$method($vars);
```

### Обновление контроллера Homepage

Теперь измените контроллер `Homepage` следующим образом:

```php
<?php declare(strict_types = 1);

namespace Example\Controllers;

use Http\Request;
use Http\Response;

class Homepage
{
    private $request;
    private $response;

    public function __construct(Request $request, Response $response)
    {
        $this->request = $request;
        $this->response = $response;
    }

    public function show()
    {
        $content = '<h1>Hello World</h1>';
        $content .= 'Hello ' . $this->request->getParameter('name', 'stranger');
        $this->response->setContent($content);
    }
}
```

### Проверка работы

Теперь попробуйте получить доступ к странице с параметром GET, например: [http://localhost:8000/?name=Arthur%20Dent](http://localhost:8000/?name=Arthur%20Dent). Вы должны увидеть, что страница отображает "Hello Arthur Dent".

### Заключение

Поздравляем! Вы успешно заложили основы вашего приложения с использованием внедрения зависимостей. Не забудьте зафиксировать изменения в репозитории!